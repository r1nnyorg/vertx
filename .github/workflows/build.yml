on: push
jobs:
    build:
        runs-on: ubuntu-latest
        steps:
        - uses: actions/checkout@main
        - uses: actions/setup-java@main
          with:
              java-version: 17.x
              distribution: zulu
        - run: |
              docker login -u chaowenguo -p ${{secrets.DOCKER}}
              gradle copyDependencies
              javac -cp copyDependencies/*:. Server.java
              ls -al
              docker build -t chaowenguo/spring .
              docker push chaowenguo/spring
