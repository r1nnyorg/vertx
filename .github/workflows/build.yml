on: push
jobs:
    build:
        runs-on: ubuntu-latest
        steps:
        - uses: actions/checkout@main
        - uses: actions/setup-java@main
          with:
              java-version: 17.x
              distribution: zulu
        - run: |
              gradle copyDependencies
              javac -p copyDependencies web/*.java web/web/*.java
              rm web/*.java web/web/*.java
              jlink -p copyDependencies:. --add-modules web --output jre
              JAVA_HOME=/usr gradle -p chat copyDependencies
              javac -cp chat/copyDependencies/*:chat chat/Server.java
